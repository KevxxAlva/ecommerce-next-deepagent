(()=>{var e={};e.id=606,e.ids=[606],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},13613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(74218),s(97373),s(55500),s(71363);var r=s(36576),a=s(72007),i=s(21818),l=s.n(i),n=s(88897),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,74218)),"/home/ubuntu/ecommerce_app/nextjs_space/app/admin/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97373)),"/home/ubuntu/ecommerce_app/nextjs_space/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,55500)),"/home/ubuntu/ecommerce_app/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/ecommerce_app/nextjs_space/app/admin/orders/page.tsx"],x="/admin/orders/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},53684:(e,t,s)=>{Promise.resolve().then(s.bind(s,84763))},84763:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(62901),a=s(24383),i=s(84374),l=s(84700),n=s(27878),o=s(75909),c=s(91334),d=s(43921),x=s(90891);function p(){let{data:e,status:t}=(0,l.useSession)()||{},s=(0,i.useRouter)(),[p,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[g,y]=(0,a.useState)(!1),[j,f]=(0,a.useState)(null),[N,b]=(0,a.useState)(""),v=async()=>{try{let e=await fetch("/api/orders");if(e.ok){let t=await e.json();m(t||[])}}catch(e){console.error("Error fetching orders:",e)}finally{h(!1)}},E=e=>{f(e),b(e.status),y(!0)},P=async()=>{if(j)try{(await fetch(`/api/orders/${j.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:N})})).ok?(d.A.success("Estado actualizado"),y(!1),v()):d.A.error("Error al actualizar estado")}catch(e){console.error("Error:",e),d.A.error("Error al actualizar estado")}},_=e=>r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${{PENDING:"bg-yellow-100 text-yellow-800",PROCESSING:"bg-blue-100 text-blue-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"}[e]||""}`,children:{PENDING:"Pendiente",PROCESSING:"Procesando",SHIPPED:"Enviado",DELIVERED:"Entregado",CANCELLED:"Cancelado"}[e]||e});return"loading"===t||u?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("p",{className:"text-gray-600",children:"Cargando..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,r.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsxs)(n.z,{variant:"ghost",onClick:()=>s.push("/admin"),className:"gap-2",children:[r.jsx(o.Z,{className:"h-4 w-4"}),"Volver"]}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Gestionar \xd3rdenes"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Orden ID"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Cliente"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Items"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Total"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Fecha"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:p?.map?.((e,t)=>r.jsxs(x.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*t},children:[r.jsxs("td",{className:"px-6 py-4 font-mono text-sm text-gray-700",children:["#",e.id.slice(0,8)]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e?.user?.name||"Sin nombre"}),r.jsx("p",{className:"text-sm text-gray-600",children:e?.user?.email})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-700",children:e?.items?.length??0}),r.jsxs("td",{className:"px-6 py-4 font-semibold text-gray-900",children:["$",e.total?.toFixed?.(2)??"0.00"]}),r.jsx("td",{className:"px-6 py-4",children:_(e.status)}),r.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(e.createdAt).toLocaleDateString("es-ES")}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(n.z,{onClick:()=>s.push(`/orders/${e.id}`),size:"sm",variant:"outline",className:"gap-1",children:[r.jsx(c.Z,{className:"h-4 w-4"}),"Ver"]}),r.jsx(n.z,{onClick:()=>E(e),size:"sm",variant:"outline",children:"Cambiar Estado"})]})})]},e.id))||null})]})})})]}),g&&j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(x.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Actualizar Estado de Orden"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Orden ID"}),(0,r.jsxs)("p",{className:"font-mono text-lg",children:["#",j.id.slice(0,8)]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nuevo Estado"}),(0,r.jsxs)("select",{value:N,onChange:e=>b(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#60B5FF]",children:[r.jsx("option",{value:"PENDING",children:"Pendiente"}),r.jsx("option",{value:"PROCESSING",children:"Procesando"}),r.jsx("option",{value:"SHIPPED",children:"Enviado"}),r.jsx("option",{value:"DELIVERED",children:"Entregado"}),r.jsx("option",{value:"CANCELLED",children:"Cancelado"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx(n.z,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancelar"}),r.jsx(n.z,{onClick:P,className:"flex-1 bg-[#60B5FF] hover:bg-[#4A9FE8]",children:"Actualizar"})]})]})]})})]})}},75909:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},91334:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},74218:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(88895).createProxy)(String.raw`/home/ubuntu/ecommerce_app/nextjs_space/app/admin/orders/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[372,329,472,287,891,766],()=>s(13613));module.exports=r})();