(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9731:function(e,t,s){Promise.resolve().then(s.bind(s,89288))},89288:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(15444),i=s(89300),n=s(79047),l=s(75762),d=s(63135),r=s(83648),o=s(54907),c=s(16629),x=s(64624),h=s(64670),m=s(48803),u=s(57624),g=s(5468),p=s(96516),j=s(86354),b=s(29707),y=s(71639);function f(){let{data:e,status:t}=(0,l.useSession)()||{},s=(0,n.useRouter)(),[f,N]=(0,i.useState)(null),[v,w]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if("unauthenticated"===t){s.push("/login");return}if("authenticated"===t){if("ADMIN"!==e?.user?.role){s.push("/");return}F()}},[t,e,s]);let F=async()=>{try{let e=await fetch("/api/admin/stats");if(e.ok){let t=await e.json();N(t)}}catch(e){console.error("Error fetching stats:",e)}finally{w(!1)}};if("loading"===t||v)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Cargando dashboard..."})});let S=f?.ordersByStatus?.map?.(e=>({name:e.status,cantidad:e?._count?.id??0}))??[],k=f?.topProducts?.map?.(e=>({nombre:e?.name?.substring?.(0,15)??"Sin nombre",vendidos:e?.totalSold??0}))??[],B=["#60B5FF","#FF9149","#FF9898","#80D8C3","#A19AD3"];return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Panel de Administraci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Bienvenido al dashboard administrativo"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Ingresos Totales"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",f?.totalRevenue?.toFixed?.(2)??"0.00"]})]}),(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)(r.Z,{className:"h-8 w-8 text-green-600"})})]})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total \xd3rdenes"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:f?.totalOrders??0})]}),(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-600"})})]})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Productos"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:f?.totalProducts??0})]}),(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-purple-600"})})]})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Usuarios"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:f?.totalUsers??0})]}),(0,a.jsx)("div",{className:"bg-orange-100 p-3 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-orange-600"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(d.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-[#60B5FF]"}),"Productos M\xe1s Vendidos"]}),(0,a.jsx)(m.h,{width:"100%",height:300,children:(0,a.jsxs)(u.v,{data:k,children:[(0,a.jsx)(g.K,{dataKey:"nombre",tick:{fontSize:10},tickLine:!1,angle:-45,textAnchor:"end",height:80,label:{value:"Producto",position:"insideBottom",offset:-10,style:{fontSize:11}}}),(0,a.jsx)(p.B,{tick:{fontSize:10},tickLine:!1,label:{value:"Cantidad",angle:-90,position:"insideLeft",style:{fontSize:11}}}),(0,a.jsx)(j.u,{contentStyle:{fontSize:11}}),(0,a.jsx)(b.$,{dataKey:"vendidos",radius:[8,8,0,0],children:k?.map?.((e,t)=>a.jsx(y.b,{fill:B[t%B.length]},`cell-${t}`))})]})})]}),(0,a.jsxs)(d.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-[#60B5FF]"}),"\xd3rdenes por Estado"]}),(0,a.jsx)(m.h,{width:"100%",height:300,children:(0,a.jsxs)(u.v,{data:S,children:[(0,a.jsx)(g.K,{dataKey:"name",tick:{fontSize:10},tickLine:!1,label:{value:"Estado",position:"insideBottom",offset:-5,style:{fontSize:11}}}),(0,a.jsx)(p.B,{tick:{fontSize:10},tickLine:!1,label:{value:"Cantidad",angle:-90,position:"insideLeft",style:{fontSize:11}}}),(0,a.jsx)(j.u,{contentStyle:{fontSize:11}}),(0,a.jsx)(b.$,{dataKey:"cantidad",radius:[8,8,0,0],children:S?.map?.((e,t)=>a.jsx(y.b,{fill:B[t%B.length]},`cell-${t}`))})]})})]})]}),(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Accesos R\xe1pidos"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/admin/products"),className:"p-4 border-2 border-[#60B5FF] rounded-lg hover:bg-[#60B5FF] hover:text-white transition-all duration-300 text-center",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold",children:"Gestionar Productos"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/categories"),className:"p-4 border-2 border-[#60B5FF] rounded-lg hover:bg-[#60B5FF] hover:text-white transition-all duration-300 text-center",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold",children:"Gestionar Categor\xedas"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/users"),className:"p-4 border-2 border-[#60B5FF] rounded-lg hover:bg-[#60B5FF] hover:text-white transition-all duration-300 text-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold",children:"Gestionar Usuarios"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/orders"),className:"p-4 border-2 border-[#60B5FF] rounded-lg hover:bg-[#60B5FF] hover:text-white transition-all duration-300 text-center",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold",children:"Gestionar \xd3rdenes"})]})]})]})]})})}}},function(e){e.O(0,[762,135,631,386,156,744],function(){return e(e.s=9731)}),_N_E=e.O()}]);